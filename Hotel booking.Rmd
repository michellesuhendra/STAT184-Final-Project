---
author: "Michelle Suhendra and Benson Wainaina"
title: "R Notebook"
output: html_notebook
---



# Preliminary EDA Rubric

Criteria	Ratings	Pts
This criterion is linked to a Learning OutcomeGuiding Question / Research Question stated clearly

This criterion is linked to a Learning OutcomeBecome acquainted with the data sources
(A) Who, what, where, when, why & (B) accompanying R chunks as necessary to become familiar with each data source

This criterion is linked to a Learning OutcomeExplore intuition related to research question
(A) informative plots & (B) preliminary observations/intuition about RQ

This criterion is linked to a Learning OutcomeTwo or more data sources
(A) Primary data must not be loaded from an R package & includes mix of variable types; (B) at least one other data source has been identified and examined

# Research Question

This project aims to discover what time of the year affects the demand of hotel rooms. When is the best time of the year to book a hotel room? What the optimum number of days of stay to get the best prices on oneâ€™s hotel booking. The results of this project can be translated to help inform consumer decisions in terms of hotel bookings. Additionally, we will use data to determine how other factors such as perceived cleanliness, staff, security and the value for money.

# Data Source
### First Data Source: Hotel Bookings

Where did you find them? The data set was found from Kaggle. (https://www.kaggle.com/jessemostipak/hotel-booking-demand)

Who collected/maintains them? The data is originally from the article Hotel Booking Demand Datasets, written by Nuno Antonio, Ana Almeida, and Luis Nunes for Data in Brief, Volume 22, February 2019.

When & Why were they originally collected? The data was collected in 2019 and was done to analyse hotel booking demand. 

What does a case represent in each data source, and how many total cases are available?
A case in the hotel booking data set represents one booking reservation and the variables include the date of arrival, average daily rate, length of stay, origin of booker, booker channel among other things. 

What are some of the variables that you plan to use?
In the first data set (hotel booking demand), we plan to use the average daily rate, length of stay and date of arrival.  

### Second Data Source: Hostel Bookings

```{r message=FALSE, warning=FALSE}
library(DataComputing)
library(mosaicData)
#path <- file.path("~", "Absenteeism_at_work_AAA", "Absenteeism_at_work.csv")
#Absent <- read.csv(file = "Absenteeism_at_work_AAA/Absenteeism_at_work.csv", sep = ";")
HotelBookings <- read.csv(file = "hotel_bookings.csv")
SmallHB <- sample_n(HotelBookings, size = 1000)
  
```

# When is the best time of year to book a hotel room?

Out of all the months, the highest average daily rate is in August and the lowest average daily rate is in January. The average daily rate in August is twice as much as that in January. 

The range of monthly average daily rates of each month is shown in the boxplot below, faceted by hotel type. Arranging the x-axis in chronological order, the boxplot shows that the monthly average daily rate increases in the middle of the year and decreases again towards the end of the year. This sharp peak in the average daily rate is much larger Resort Hotels.  
```{r}
MonthADR <-
HotelBookings %>%
  group_by(arrival_date_month) %>%
  summarise(monthave = mean(adr)) %>%
  arrange(desc(monthave)) 
MonthADR

HotelBookings %>%
  filter(adr < 2000) %>% #remove outlier
  ggplot(aes(x=factor(arrival_date_month,levels=month.name), y = adr)) +
  geom_boxplot(aes(color = arrival_date_month, fill = arrival_date_month), 
               alpha = 0.25, outlier.size = 1, outlier.colour = "gray") +
  xlab("Month") + 
  ylab("Monthly Average Daily Rate") + 
  facet_wrap(~hotel) +
  theme(axis.text.x = element_text(angle = 60, hjust = 1))
```
# How does demand of hotel booking affect average daily rate?
The highest number of bookinds are made for arrivals in August, July and May, while the lowest is in January, December. Thus, the peak reservations are in the summer months, while there is a smaller number of bookings made in the winter months.  

The number of reservations was plotted against the monthly average daily rate. The graph shows that there is a linear correlation between the demand (number of reservations) and the price charged.
```{r}
MonthReservation <-
HotelBookings %>%
  group_by(arrival_date_month) %>%
  summarise(reservation_num = n()) %>%
  arrange(desc(reservation_num))
MonthReservation

MonthADR %>%
  left_join(MonthReservation, by = c("arrival_date_month" = "arrival_date_month")) %>%
  ggplot(aes(x = reservation_num, y = monthave)) +
  geom_point() +
  geom_smooth(method = "lm")
  
```


# Does the type of hotel change this trend?

The monthly average daily rate was plotted against the number of reservations in that month and faceted by the hotel type. The graph shows that the monthly average daily rate increases more significantly as the number of reservations increases in resort hotels compared to city hotels. This suggests that resort hotel prices fluctuate more and to a larger degree in terms of price compared to city hotels.

```{r}
MonthADRHotel <-
HotelBookings %>%
  group_by(hotel,arrival_date_month) %>%
  summarise(monthave = mean(adr)) 
MonthADRHotel

MonthResHotel <-
HotelBookings %>%
  group_by(hotel,arrival_date_month) %>%
  summarise(reservation_num = n()) 
MonthResHotel

MonthADRHotel %>%
  left_join(MonthResHotel, by = c("arrival_date_month" = "arrival_date_month", "hotel"="hotel")) %>%
  ggplot(aes(x = reservation_num, y = monthave)) +
  geom_point() +
  geom_smooth(method = "lm") +
  facet_wrap(~hotel)
```


# What is the optimal length of stay to get the best daily rate?

```{r}
HotelBookings <- 
  HotelBookings %>%
  mutate(arrivaldate = paste(arrival_date_year,arrival_date_month,arrival_date_week_number, sep = '-')) %>%
  mutate(totalstay = stays_in_weekend_nights + stays_in_week_nights)
head(HotelBookings)

HotelBookings %>%
  filter(adr <2000) %>% #to remove outliers
  filter(arrival_date_month == "August") %>%
  ggplot(aes(x = totalstay, y = adr)) + #color = arrival_date_month
  geom_point(alpha = 0.1, position = "jitter") +
  #geom_smooth() +
  facet_wrap(~hotel)
```
### Second Data Set

# Does hotel appearance affect price?
Hotel appearance was plotted based on cleanliness agaist value for money and as per the graph there seems to be a linear dependacy between the two. This claim supports the intial assumption we had for does the type of hotel determine the price paid.
```{r}
HostelBookings <- read.csv(file = "Hostel.csv")
HostelAppear<-
  HostelBookings%>%
  group_by(hostel.name,valueformoney,cleanliness)%>%
  summarise(hotel.name=n())
HostelAppear
HostelAppear%>%
  ggplot(aes(y=valueformoney,x=cleanliness))+
  geom_point()+
  geom_smooth(method="lm")
```

